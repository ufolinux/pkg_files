pkgname=xdg-desktop-portal
pkgver=1.16.0
pkgrel=3
arch=(x86_64)
depends=(glib2 fuse3 rtkit pipewire fuse3 gsettings-desktop-schemas
	systemd libportal flatpak xdg-dbus-proxy )
makedepends=(meson xmlto docbook-xsl)
source=(https://github.com/flatpak/xdg-desktop-portal/releases/download/$pkgver/xdg-desktop-portal-$pkgver.tar.xz)

prepare() {
	mkdir -p $pkgname-$pkgver/build
}

build() {
	cd $pkgname-$pkgver/build

	meson \
	--prefix=/usr \
	-D pipewire=enabled \
	-D libportal=enabled \
	..

	ninja
}

package() {
	cd $pkgname-$pkgver/build

	DESTDIR=$pkgdir ninja install
}
